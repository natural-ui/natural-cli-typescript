{"remainingRequest":"E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\node_modules\\thread-loader\\dist\\cjs.js??ref--7-1!E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\node_modules\\babel-loader\\lib\\index.js??ref--7-2!E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\src\\services\\http.ts","dependencies":[{"path":"E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\src\\services\\http.ts","mtime":1557549177000},{"path":"E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558612017300},{"path":"E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1550204147052},{"path":"E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\node_modules\\babel-loader\\lib\\index.js","mtime":1557710044686}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJhbnRkL2xpYi9tZXNzYWdlL3N0eWxlIjsKaW1wb3J0IF9tZXNzYWdlIGZyb20gImFudGQvbGliL21lc3NhZ2UiOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5lbnRlck1vZHVsZTsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgdmFyIG93bktleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyBpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICdmdW5jdGlvbicpIHsgb3duS2V5cyA9IG93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHN5bSkuZW51bWVyYWJsZTsgfSkpOyB9IG93bktleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0ICogYXMgcXMgZnJvbSAncXMnOwppbXBvcnQgdXNlckluZm8gZnJvbSAnQHN0b3JlL2F1dGhTdG9yZS9zeW5jVXNlckluZm8nOwp2YXIgSFRUUEVSUk9SOwoKKGZ1bmN0aW9uIChIVFRQRVJST1IpIHsKICBIVFRQRVJST1JbSFRUUEVSUk9SWyJMT0dJQ0VSUk9SIl0gPSAwXSA9ICJMT0dJQ0VSUk9SIjsKICBIVFRQRVJST1JbSFRUUEVSUk9SWyJUSU1FT1VURVJST1IiXSA9IDFdID0gIlRJTUVPVVRFUlJPUiI7CiAgSFRUUEVSUk9SW0hUVFBFUlJPUlsiTkVUV09SS0VSUk9SIl0gPSAyXSA9ICJORVRXT1JLRVJST1IiOwp9KShIVFRQRVJST1IgfHwgKEhUVFBFUlJPUiA9IHt9KSk7Cgp2YXIgVE9LRU5FUlJPUiA9IFs0MDEsIDQwMiwgNDAzXTsKdmFyIERFRkFVTFRDT05GSUcgPSB7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuQkFTRVVSTAp9Owp2YXIgaHR0cCA9IHt9Owp2YXIgbWV0aG9kcyA9IFsnZ2V0JywgJ3Bvc3QnLCAncHV0JywgJ2RlbGV0ZSddOwp2YXIgYXV0aFRpbWVyID0gbnVsbDsKCnZhciBpc1N1Y2Nlc3MgPSBmdW5jdGlvbiBpc1N1Y2Nlc3MocmVzKSB7CiAgcmV0dXJuIHJlcy5lcnJDb2RlID09PSAwOwp9OwoKdmFyIHJlc0Zvcm1hdCA9IGZ1bmN0aW9uIHJlc0Zvcm1hdChyZXMpIHsKICByZXR1cm4gcmVzLnJlc3BvbnNlIHx8IHJlcy5kYXRhIHx8IHt9Owp9OwoKbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgaHR0cFt2XSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEsIGJhc2VVcmwpIHsKICAgIHZhciBheGlvc0NvbmZpZyA9IHsKICAgICAgbWV0aG9kOiB2LAogICAgICB1cmw6IHVybCwKICAgICAgYmFzZVVSTDogYmFzZVVybCB8fCBERUZBVUxUQ09ORklHLmJhc2VVUkwsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHVzZXJJbmZvLnRva2VuKQogICAgICB9CiAgICB9OwogICAgdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKERFRkFVTFRDT05GSUcpOyAvLyBBZGQgYSByZXF1ZXN0IGludGVyY2VwdG9yCgogICAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjZmcpIHsKICAgICAgY2ZnLnBhcmFtcyA9IF9vYmplY3RTcHJlYWQoe30sIGNmZy5wYXJhbXMsIHsKICAgICAgICB0czogRGF0ZS5ub3coKSAvIDEwMDAKICAgICAgfSk7CiAgICAgIHJldHVybiBjZmc7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOyAvLyBBZGQgYSByZXNwb25zZSBpbnRlcmNlcHRvcgoKICAgIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHZhciByZGF0YSA9IF90eXBlb2YocmVzcG9uc2UuZGF0YSkgPT09ICdvYmplY3QnICYmICFpc05hTihyZXNwb25zZS5kYXRhLmxlbmd0aCkgPyByZXNwb25zZS5kYXRhWzBdIDogcmVzcG9uc2UuZGF0YTsKCiAgICAgIGlmICghaXNTdWNjZXNzKHJkYXRhKSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7CiAgICAgICAgICBtc2c6IHJkYXRhLm1zZywKICAgICAgICAgIGVyckNvZGU6IHJkYXRhLmVyckNvZGUsCiAgICAgICAgICB0eXBlOiBIVFRQRVJST1JbSFRUUEVSUk9SLkxPR0lDRVJST1JdLAogICAgICAgICAgY29uZmlnOiByZXNwb25zZS5jb25maWcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc0Zvcm1hdChyZGF0YSk7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgaWYgKFRPS0VORVJST1IuaW5jbHVkZXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSkgewogICAgICAgIF9tZXNzYWdlLmRlc3Ryb3koKTsKCiAgICAgICAgX21lc3NhZ2UuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGZhaWx1cmUsIFBsZWFzZSByZWxvZ2luIScpOwoKICAgICAgICBjbGVhclRpbWVvdXQoYXV0aFRpbWVyKTsKICAgICAgICBhdXRoVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoJy8jL2xvZ2luJyk7CiAgICAgICAgfSwgMzAwKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7CiAgICAgICAgbXNnOiBlcnJvci5yZXNwb25zZS5zdGF0dXNUZXh0IHx8IGVycm9yLm1lc3NhZ2UgfHwgJ25ldHdvcmsgZXJyb3InLAogICAgICAgIHR5cGU6IC9edGltZW91dCBvZi8udGVzdChlcnJvci5tZXNzYWdlKSA/IEhUVFBFUlJPUltIVFRQRVJST1IuVElNRU9VVEVSUk9SXSA6IEhUVFBFUlJPUltIVFRQRVJST1IuTkVUV09SS0VSUk9SXSwKICAgICAgICBjb25maWc6IGVycm9yLmNvbmZpZwogICAgICB9KTsKICAgIH0pOwoKICAgIGlmICh2ID09PSAnZ2V0JykgewogICAgICBheGlvc0NvbmZpZy5wYXJhbXMgPSBkYXRhOwogICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpIHsKICAgICAgYXhpb3NDb25maWcuZGF0YSA9IGRhdGE7CiAgICB9IGVsc2UgewogICAgICBheGlvc0NvbmZpZy5kYXRhID0gcXMuc3RyaW5naWZ5KGRhdGEpOwogICAgfQoKICAgIGF4aW9zQ29uZmlnLnN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7CiAgICByZXR1cm4gaW5zdGFuY2UucmVxdWVzdChheGlvc0NvbmZpZykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHJldHVybiByZXM7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgIF9tZXNzYWdlLmRlc3Ryb3koKTsKCiAgICAgIF9tZXNzYWdlLmVycm9yKGVyci5yZXNwb25zZSB8fCBlcnIubXNnIHx8IGVyci5zdGFjayB8fCAndW5rbm93biBlcnJvcicpOwoKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShheGlvc0NvbmZpZy51cmwuaW5jbHVkZXMoJ2F1dG9TY3JpcHQuc2V0JykgPyB7CiAgICAgICAgZXJyOiBlcnIKICAgICAgfSA6IHsKICAgICAgICBlcnI6IGVyciwKICAgICAgICBzdGFjazogZXJyLm1zZyB8fCBlcnIuc3RhY2sgfHwgJycKICAgICAgfSk7CiAgICB9KTsKICB9Owp9KTsKdmFyIF9kZWZhdWx0ID0gaHR0cDsKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkuZGVmYXVsdDsKCiAgaWYgKCFyZWFjdEhvdExvYWRlcikgewogICAgcmV0dXJuOwogIH0KCiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoVE9LRU5FUlJPUiwgIlRPS0VORVJST1IiLCAiRTpcXHdvcmtzcGFjZS1teXNlbGZcXG5hdHVyYWwtY2xpLXR5cGVzY3JpcHRcXHdlYnBhY2s0LXJlYWN0LXRzLW1vYngtYW50ZC15ZGpmZVxcc3JjXFxzZXJ2aWNlc1xcaHR0cC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKERFRkFVTFRDT05GSUcsICJERUZBVUxUQ09ORklHIiwgIkU6XFx3b3Jrc3BhY2UtbXlzZWxmXFxuYXR1cmFsLWNsaS10eXBlc2NyaXB0XFx3ZWJwYWNrNC1yZWFjdC10cy1tb2J4LWFudGQteWRqZmVcXHNyY1xcc2VydmljZXNcXGh0dHAudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihodHRwLCAiaHR0cCIsICJFOlxcd29ya3NwYWNlLW15c2VsZlxcbmF0dXJhbC1jbGktdHlwZXNjcmlwdFxcd2VicGFjazQtcmVhY3QtdHMtbW9ieC1hbnRkLXlkamZlXFxzcmNcXHNlcnZpY2VzXFxodHRwLnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIobWV0aG9kcywgIm1ldGhvZHMiLCAiRTpcXHdvcmtzcGFjZS1teXNlbGZcXG5hdHVyYWwtY2xpLXR5cGVzY3JpcHRcXHdlYnBhY2s0LXJlYWN0LXRzLW1vYngtYW50ZC15ZGpmZVxcc3JjXFxzZXJ2aWNlc1xcaHR0cC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGF1dGhUaW1lciwgImF1dGhUaW1lciIsICJFOlxcd29ya3NwYWNlLW15c2VsZlxcbmF0dXJhbC1jbGktdHlwZXNjcmlwdFxcd2VicGFjazQtcmVhY3QtdHMtbW9ieC1hbnRkLXlkamZlXFxzcmNcXHNlcnZpY2VzXFxodHRwLnRzIik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoaXNTdWNjZXNzLCAiaXNTdWNjZXNzIiwgIkU6XFx3b3Jrc3BhY2UtbXlzZWxmXFxuYXR1cmFsLWNsaS10eXBlc2NyaXB0XFx3ZWJwYWNrNC1yZWFjdC10cy1tb2J4LWFudGQteWRqZmVcXHNyY1xcc2VydmljZXNcXGh0dHAudHMiKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihyZXNGb3JtYXQsICJyZXNGb3JtYXQiLCAiRTpcXHdvcmtzcGFjZS1teXNlbGZcXG5hdHVyYWwtY2xpLXR5cGVzY3JpcHRcXHdlYnBhY2s0LXJlYWN0LXRzLW1vYngtYW50ZC15ZGpmZVxcc3JjXFxzZXJ2aWNlc1xcaHR0cC50cyIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKF9kZWZhdWx0LCAiZGVmYXVsdCIsICJFOlxcd29ya3NwYWNlLW15c2VsZlxcbmF0dXJhbC1jbGktdHlwZXNjcmlwdFxcd2VicGFjazQtcmVhY3QtdHMtbW9ieC1hbnRkLXlkamZlXFxzcmNcXHNlcnZpY2VzXFxodHRwLnRzIik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmxlYXZlTW9kdWxlOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["E:\\workspace-myself\\natural-cli-typescript\\webpack4-react-ts-mobx-antd-ydjfe\\src\\services\\http.ts"],"names":["axios","qs","userInfo","HTTPERROR","TOKENERROR","DEFAULTCONFIG","baseURL","process","env","BASEURL","http","methods","authTimer","isSuccess","res","errCode","resFormat","response","data","forEach","v","url","baseUrl","axiosConfig","method","headers","Authorization","token","instance","create","interceptors","request","use","cfg","params","ts","Date","now","error","Promise","reject","rdata","isNaN","length","msg","type","LOGICERROR","config","includes","status","destroy","clearTimeout","setTimeout","location","replace","statusText","message","test","TIMEOUTERROR","NETWORKERROR","FormData","stringify","startTime","then","catch","err","stack","resolve"],"mappings":"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","sourcesContent":["import axios, { AxiosRequestConfig as _AxiosRequestConfig } from 'axios'\nimport * as qs from 'qs'\nimport { message } from 'antd'\n\nimport userInfo from '@store/authStore/syncUserInfo'\n\nexport interface AxiosRequestConfig extends _AxiosRequestConfig {\n    startTime?: Date\n}\n\nexport interface HttpResquest {\n    get?(url: string, data: object, baseUrl?: string): Promise<any>\n    post?(url: string, data: object, baseUrl?: string): Promise<any>\n    delete?(url: string, data: object, baseUrl?: string): Promise<any>\n    put?(url: string, data: object, baseUrl?: string): Promise<any>\n}\n\nenum HTTPERROR {\n    LOGICERROR,\n    TIMEOUTERROR,\n    NETWORKERROR\n}\n\nconst TOKENERROR = [401, 402, 403]\n\nconst DEFAULTCONFIG = {\n    baseURL: process.env.BASEURL\n}\n\nconst http: HttpResquest = {}\nconst methods = ['get', 'post', 'put', 'delete']\n\nlet authTimer: NodeJS.Timer = null\n\nconst isSuccess = res => res.errCode === 0\nconst resFormat = res => res.response || res.data || {}\n\nmethods.forEach(v => {\n    http[v] = (url: string, data: object, baseUrl?: string) => {\n        const axiosConfig: AxiosRequestConfig = {\n            method: v,\n            url,\n            baseURL: baseUrl || DEFAULTCONFIG.baseURL,\n            headers: { Authorization: `Bearer ${userInfo.token}` }\n        }\n        const instance = axios.create(DEFAULTCONFIG)\n        // Add a request interceptor\n        instance.interceptors.request.use(\n            cfg => {\n                cfg.params = { ...cfg.params, ts: Date.now() / 1000 }\n                return cfg\n            },\n            error => Promise.reject(error)\n        )\n        // Add a response interceptor\n        instance.interceptors.response.use(\n            response => {\n                const rdata =\n                    typeof response.data === 'object' && !isNaN(response.data.length) ? response.data[0] : response.data\n                if (!isSuccess(rdata)) {\n                    return Promise.reject({\n                        msg: rdata.msg,\n                        errCode: rdata.errCode,\n                        type: HTTPERROR[HTTPERROR.LOGICERROR],\n                        config: response.config\n                    })\n                }\n                return resFormat(rdata)\n            },\n            error => {\n                if (TOKENERROR.includes(error.response.status)) {\n                    message.destroy()\n                    message.error('Authentication failure, Please relogin!')\n                    clearTimeout(authTimer)\n                    authTimer = setTimeout(() => {\n                        location.replace('/#/login')\n                    }, 300)\n                    return\n                }\n                return Promise.reject({\n                    msg: error.response.statusText || error.message || 'network error',\n                    type: /^timeout of/.test(error.message)\n                        ? HTTPERROR[HTTPERROR.TIMEOUTERROR]\n                        : HTTPERROR[HTTPERROR.NETWORKERROR],\n                    config: error.config\n                })\n            }\n        )\n        if (v === 'get') {\n            axiosConfig.params = data\n        } else if (data instanceof FormData) {\n            axiosConfig.data = data\n        } else {\n            axiosConfig.data = qs.stringify(data)\n        }\n        axiosConfig.startTime = new Date()\n        return instance\n            .request(axiosConfig)\n            .then(res => res)\n            .catch(err => {\n                message.destroy()\n                message.error(err.response || err.msg || err.stack || 'unknown error')\n                return Promise.resolve(\n                    axiosConfig.url.includes('autoScript.set') ? { err } : { err, stack: err.msg || err.stack || '' }\n                )\n            })\n    }\n})\n\nexport default http\n"]}]}